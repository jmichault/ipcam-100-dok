---
lang: ru
lang-niv: auto
lang-ref: 051-IMP-programigo_gvidilo
layout: page
title: 'Руководство по программированию   _IMP_'
---


Документация API можно увидеть здесь:   
* [  Оригинальная версия на китайском  ](../../zh/includes.zh/html/)  


* [  Английский  ](../../en/includes.en/html/)  


* [  Французская версия переведена Google  ](../../fr/includes.fr/html/)  




# _IMP_   \(  _Ingenic Media Platform_  \)   \( см.   _imp\_system.h_  \)

## Базовые концепты
Программа T20 / T21 основана на следующих концепциях:  
 1. Устройство   \( =  _Device_  \)    
 Устройство завершает функцию. Примеры:  
       *    _Framesource_ : Заполните вывод видеоклипов.  
       *    _Encoder_ : Заполните функцию видеокода или кода изображения.  
 2. Группа   \( =  _Group_  \)    
 Группа - наименьший блок ввода данных. Устройство может иметь несколько групп, и каждая группа может принимать только один канал ввода данных. Группа может иметь несколько результатов.   
      Группа также является контейнером для конкретных функций   "  ". См. Объяснение в разделе «Канал» для более подробной информации.  
 3. ELIGO   \( =  _Output_  \)    
 Выход - самый маленький блок вывода данных на в группу.    
 Канал обычно связан с одним функциональным блоком.    
 Например:   
     -  Для кодела канал завершает функцию   _H264_   или кода   _JPEG_.  


     -  Для   _IVS_ канал завершает функцию конкретного алгоритма, и при создании канала Channel определяются характерные алгоритмы, типичные параметры алгоритма.


     -  Для  _OSD_ есть регион, аналогичный   _Channel_, регион - это специфическая сверхметочная область, которая может быть верхним   \( изображением  \) крышка   \( окклюзия  \) и т. Д.  


     -  Для   _FrameSource_ канал производит исходное изображение и канал   _FrameSource_   на самом деле является группой  


    
       Канал, как функциональный блок, обычно сохранился в группе   \(, кроме   _FrameSource_  \) получения данных.  

    Количество каналов, которые могут быть записаны группой различных устройств, также различается.

## Модульная ссылка   \(  _Bind_  \)

После двух групп связаны   _Bind_, данные из исходной группы автоматически отправят в пункт назначения.    
 Поскольку Группа является наименьшим блоком ввода данных, а выход - это самый маленький блок вывода данных,   _deviceID_,   _groupID_   и   _outputID_    _srcCell_   в двух параметрах   _IMP\_System\_Bind \(IMPCell * srcCell, IMPCell * dstCell\)_   действительны.    

Хотя   _dstCell_   действителен только для   _deviceID_   и   _groupID_,   _outputID_   не имеет смысла, как вход в данные.  

Пример 1: 
```
IMPCell fs_chn0 = {DEV_ID_FS, 0, 0};    // FrameSource deviceID: DEV_ID_FS groupID: 0 outputID: 0
IMPCell enc_grp0 = {DEV_ID_ENC, 0, 0}; // ENC deviceID: DEV_ID_ENC groupID : 0 outputID: 0, où le troisième paramètre de enc_grp0 n'a pas de sens. 
int ret = IMP_System_Bind (& fs_chn0, & enc_grp0);
if(ret <0>)
  printf ("Bind FrameSource Channel0 and Encoder Group0 failed \ n");

```
Результат:    
 *  Группа генерирует группу, которая генерирует ссылку из Frageource для кодера. 

* Два канала зарегистрированы в группе Encoder, поэтому Group Encoder имеет две продукты:   _H264_   и   _JPEG_.  



Пример 2:
```
// flux de données principal
IMPCell fs_chn0 = {DEV_ID_FS, 0, 0};
IMPCell osd_grp0 = {DEV_ID_OSD, 0, 0};
IMPCell enc_grp0 = {DEV_ID_ENC, 0, 0};
int ret = IMP_System_Bind(&fs_chn0, &osd_grp0);
if (ret < 0)
    printf("Bind FrameSource Channel0 and OSD Group0 failed\n");

int ret = IMP_System_Bind(&osd_grp0, &enc_grp0);
if (ret < 0)
    printf("Bind OSD Group0 and Encoder Group0 failed\n");

// flux de données lié 
IMPCell fs_chn1_output0 = {DEV_ID_FS, 1, 0};
IMPCell ivs_grp0 = {DEV_ID_IVS, 0, 0};
IMPCell osd_grp1 = {DEV_ID_OSD, 1, 0};
IMPCell enc_grp1 = {DEV_ID_ENC, 1, 0};

int ret = IMP_System_Bind(&fs_chn1_output0, &ivs_grp0);
if (ret < 0)
    printf("Bind FrameSource Channel1 and IVS Group0 failed\n");

int ret = IMP_System_Bind(&ivs_grp0, &osd_grp1);
if (ret < 0)
    printf("Bind IVS Group0 and OSD Group1 failed\n");

int ret = IMP_System_Bind(&osd_grp1, &enc_grp1);
if (ret < 0)
    printf("Bind OSD Group1 and Encoder Group1 failed\n");
```
Применить - это типичное приложение   _Bind_ : двухканальный код.  

Примечания:  
  *   Рекомендуется, чтобы все операции связи сделаны при инициализации системы.  

## Функции

### _int IMP\_System\_Init \(void \)_
Начало системы   _IMP_.  
### Начало системы _int IMP\_System\_Exit \(void\)_. \_

После вызова этой функции все память и   _handles_   _IMP_   будут выпущены, а аппаратное устройство будет закрыто.  

### После вызова этой функции все память и _int64\_t IMP\_System\_GetTimeStamp \(void\)_ \_ будут выпущены, а аппаратное устройство будет закрыто.  \(

Получите поле синхронизации системы   _IMP_   в микросекундах.    
 Возврат: время в микроцентах. 

### Получите поле синхронизации системы _int IMP\_System\_RebaseTimeStamp \(bases int64\_t\)_ в микросекундах. \_ Возврат: время в микроцентах.  \(
Определите систему Timestamp   _IMP_   в микросекунтах.    
 Возврат: 0, если успешно. 

### Определите систему Timestamp _uint32\_t IMP\_System\_ReadReg32 \(uint32\_t u32Addr\)_ в микросекунтах. \_ Возврат: 0, если успешно. \_

Прочтите значение 32-битного регистра.  

### _void IMP\_System\_WriteReg32 \(uint32_  T Regaddr, значение uint32  _t\)_
Напишите значение в 32-разрядном регистре.  

Примечание. Внимательно вызывайте этот API и проверьте значение реестра, иначе это может вызвать системные ошибки.

### _int IMP_  Система  _GetVersion \(IMPVersion * pstVersion\)_

Получите систему системы   _IMP_.  

### _const char * IMP_  Система  _GetCPUInfo \(void\)_
Получите информацию о модели процессора.  
Примечание. Возвращаемое значение представляет собой строку модели ЦП, например, для T10 существует "T10"и "T10-Lite".

### _int IMP_  Система   \(

Связь между исходной ячейкой и местом назначения.

Примечание 1. В соответствии с концепциями «Устройство», «Группа» и «Выход» каждое устройство может иметь несколько групп, и каждая группа может иметь несколько выходов, группа используется как интерфейс ввода устройства, а выход используется как интерфейс продукта устройства. Следовательно, ссылка фактически соединяет определенный выход устройства вывода с определенной Группой устройства ввода.

Примечание 2: После успешной ссылки данные, сгенерированные   _srcCell_   (  Eligo  )  , будут автоматически переданы в группу адресатов   (   ).  

### _int IMP_  Система   \(
Разгруппируйте источники и места назначения. 

### _int IMP_  Система   \(

Извлекает информацию из исходной ячейки, относящуюся к месту назначения.

